<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <!-- Navbar Glass -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-glass mb-5 fixed-top">
        <div class="container">
            <a class="navbar-brand" href="/"><i class="fas fa-book-reader me-2"></i>LIBRARY APP</a>
            <div class="d-flex">
                <span class="text-white me-3 align-self-center">Hi, Admin!</span>
                <form th:action="@{/logout}" method="post">
                    <button class="btn btn-outline-light btn-sm rounded-pill px-4">Logout</button>
                </form>
            </div>
        </div>
    </nav>

    <div class="container" style="margin-top: 100px;">
        <div class="row mb-4">
            <div class="col-md-12 text-center text-white">
                <h1 class="fw-bold">Dashboard Statistik</h1>
                <p>Pantau koleksi bukumu dengan gaya.</p>
            </div>
        </div>

        <!-- Menu Cepat -->
        <div class="row mb-5 justify-content-center">
            <div class="col-md-4">
                <div class="glass-card text-center p-4">
                    <i class="fas fa-book fa-3x text-white mb-3"></i>
                    <h3 class="text-white">Kelola Buku</h3>
                    <a href="/books" class="btn btn-light rounded-pill mt-2 px-4">Lihat Daftar</a>
                </div>
            </div>
        </div>

        <!-- Chart Section -->
        <div class="glass-card">
            <h4 class="text-white mb-4 border-bottom pb-2">Grafik Kategori Buku</h4>
            <div style="height: 400px; position: relative;">
                <canvas id="bookChart"></canvas>
            </div>
        </div>
    </div>

    <script th:inline="javascript">
        var chartData = /*[[${chartData}]]*/ [];
        var labels = chartData.map(item => item[0]);
        var counts = chartData.map(item => item[1]);

        var ctx = document.getElementById('bookChart').getContext('2d');
        // Setting warna font chart biar putih (kontras dengan background glass)
        Chart.defaults.color = '#FFF';
        
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Jumlah Buku',
                    data: counts,
                    backgroundColor: 'rgba(255, 255, 255, 0.7)',
                    borderColor: 'rgba(255, 255, 255, 1)',
                    borderWidth: 1,
                    borderRadius: 10
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' } },
                    x: { grid: { display: false } }
                }
            }
        });
    </script>
</body>
</html>